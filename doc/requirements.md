# チー牛農場 - 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**チー牛農場**

### 1.2 コンセプト
「静かなインターネット」- 外向的な社交プレッシャーのない、安心できるオンライン空間を提供する。

### 1.3 背景・目的
- Instagram的な「映え」投稿圧力からの解放
- 内向的な人々が無理なく交流できる場の提供
- 同じ価値観を持つ人同士の深いつながりの促進
- 外部検索エンジンから隔離された安全な空間の構築

---

## 2. ターゲットユーザー

### 2.1 主要ターゲット
- **年齢層**: 20代〜40代
- **特徴**:
  - 静かな趣味を持つ人（温泉、風景鑑賞、ドライブ、ジャズ鑑賞、ホームセンター巡りなど）
  - 無理な自己演出を求められない空間を望む人
  - 既存SNSの「いいね」競争や承認欲求文化に疲れた人
  - 同じ価値観を持つ人と深く繋がりたい人

### 2.2 ペルソナ
1. **Aさん（28歳・会社員）**: 週末は一人で温泉巡りが趣味。SNSに投稿したいが「映え」を求められるのが苦手。
2. **Bさん（35歳・エンジニア）**: ジャズとコーヒーが好き。同じ趣味の人と繋がりたいが、自己アピールは苦手。
3. **Cさん（32歳・フリーランス）**: ホームセンターでの買い物が至福の時間。この趣味を共有できる場がない。

---

## 3. 機能要件

### 3.1 認証機能（Phase 1: MVP）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| AUTH-01 | メール/パスワード登録 | メールアドレスとパスワードによるユーザー登録 | 必須 |
| AUTH-02 | マジックリンクログイン | メールで送信されるリンクによるパスワードレスログイン | 必須 |
| AUTH-03 | プロフィール初期設定 | 登録後の趣味タグ選択・自己紹介設定 | 必須 |
| AUTH-04 | ログアウト | セッション終了 | 必須 |
| AUTH-05 | パスワードリセット | パスワード再設定メール送信 | 必須 |

### 3.2 投稿・タイムライン機能（Phase 1: MVP）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| POST-01 | 投稿作成 | テキスト + 画像（任意）の投稿作成 | 必須 |
| POST-02 | 匿名投稿 | 投稿者名を非表示にする投稿オプション | 必須 |
| POST-03 | 趣味タグ付け | 投稿に趣味タグを付与 | 必須 |
| POST-04 | 投稿編集 | 自分の投稿の編集 | 必須 |
| POST-05 | 投稿削除 | 自分の投稿の削除 | 必須 |
| POST-06 | タイムライン表示 | フォロー中ユーザーの投稿を時系列で表示 | 必須 |
| POST-07 | 趣味タグフィルタ | タイムラインを趣味タグで絞り込み | 高 |
| POST-08 | 無限スクロール | タイムラインのページネーション | 高 |

### 3.3 リアクション機能（Phase 1: MVP）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| REACT-01 | いいね | 投稿への「いいね」リアクション | 必須 |
| REACT-02 | 共感 | 「わかる」「共感」のリアクション | 必須 |
| REACT-03 | 同感 | 「自分も同じ」のリアクション | 必須 |
| REACT-04 | 応援 | 「頑張って」のリアクション | 必須 |
| REACT-05 | リアクション数表示 | 正確な数ではなくレンジで表示（例：10〜50） | 必須 |

### 3.4 コメント機能（Phase 1: MVP）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| CMT-01 | コメント投稿 | 投稿へのコメント | 必須 |
| CMT-02 | 匿名コメント | コメント者名を非表示にするオプション | 必須 |
| CMT-03 | コメント削除 | 自分のコメントの削除 | 必須 |

### 3.5 プロフィール機能（Phase 1: MVP）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| PROF-01 | プロフィール表示 | 自己紹介・趣味タグ・投稿履歴の表示 | 必須 |
| PROF-02 | プロフィール編集 | 自己紹介・アバター・趣味タグの編集 | 必須 |
| PROF-03 | プライバシー設定 | デフォルト匿名設定・表示範囲設定 | 必須 |
| PROF-04 | 投稿履歴 | 自分の過去の投稿一覧 | 必須 |

### 3.6 フォロー機能（Phase 1: MVP）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| FLW-01 | フォロー | 他ユーザーをフォロー | 必須 |
| FLW-02 | フォロー解除 | フォローの解除 | 必須 |
| FLW-03 | フォロー一覧 | フォロー中ユーザー一覧表示 | 必須 |
| FLW-04 | フォロワー一覧 | フォロワー一覧表示 | 必須 |

### 3.7 コミュニティ機能（Phase 2）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| COM-01 | コミュニティ作成 | 趣味別コミュニティの作成 | 高 |
| COM-02 | コミュニティ参加 | 既存コミュニティへの参加 | 高 |
| COM-03 | コミュニティ退会 | コミュニティからの退会 | 高 |
| COM-04 | 公開/非公開設定 | コミュニティの公開範囲設定 | 高 |
| COM-05 | コミュニティ投稿 | コミュニティ限定投稿 | 高 |
| COM-06 | モデレーター機能 | 管理者・モデレーターの権限設定 | 中 |
| COM-07 | コミュニティ検索 | 趣味タグによるコミュニティ検索 | 高 |

### 3.8 マッチング機能（Phase 2）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| MATCH-01 | 類似ユーザー提案 | 趣味タグベースでユーザーを推薦 | 中 |
| MATCH-02 | 類似度表示 | 「〇〇%似ています」の表示 | 低 |

### 3.9 イベント機能（Phase 3）

| ID | 機能名 | 説明 | 優先度 |
|----|--------|------|--------|
| EVT-01 | イベント作成 | オフラインイベントの作成 | 中 |
| EVT-02 | 参加申込 | イベントへの参加申込 | 中 |
| EVT-03 | 参加キャンセル | 参加申込のキャンセル | 中 |
| EVT-04 | 参加者一覧 | イベント参加者の確認 | 中 |
| EVT-05 | イベントレポート | イベント後のレポート投稿 | 低 |

---

## 4. 非機能要件

### 4.1 セキュリティ

| ID | 要件 | 詳細 |
|----|------|------|
| SEC-01 | 認証 | Supabase Authによるセキュアな認証 |
| SEC-02 | 認可 | Row Level Security (RLS) による行レベルアクセス制御 |
| SEC-03 | 入力検証 | すべてのユーザー入力のサニタイズ |
| SEC-04 | HTTPS | 全通信のSSL/TLS暗号化 |
| SEC-05 | レート制限 | APIエンドポイントへのレート制限 |

### 4.2 検索避け（プライバシー保護）

| ID | 要件 | 詳細 |
|----|------|------|
| PRI-01 | robots.txt | 検索エンジンクローラーのブロック |
| PRI-02 | noindex | 全ページにnoindexメタタグ設置 |
| PRI-03 | 非公開URL | 推測困難なURLパターン |
| PRI-04 | 外部共有制限 | SNS共有ボタンなし |

### 4.3 パフォーマンス

| ID | 要件 | 詳細 |
|----|------|------|
| PERF-01 | 初期読み込み | First Contentful Paint < 1.5秒 |
| PERF-02 | ページ遷移 | ページ遷移 < 300ms |
| PERF-03 | 画像最適化 | Next.js Imageによる自動最適化 |
| PERF-04 | キャッシュ | React Queryによるデータキャッシュ |
| PERF-05 | 遅延読み込み | 画像・コンポーネントの遅延読み込み |

### 4.4 可用性

| ID | 要件 | 詳細 |
|----|------|------|
| AVL-01 | 稼働率 | 99.5%以上の稼働率 |
| AVL-02 | PWA | オフライン時の基本機能提供 |
| AVL-03 | エラーハンドリング | ユーザーフレンドリーなエラー表示 |

### 4.5 スケーラビリティ

| ID | 要件 | 詳細 |
|----|------|------|
| SCL-01 | 初期ユーザー | 1,000ユーザー対応 |
| SCL-02 | 拡張性 | 10,000ユーザーまでの水平スケーリング |
| SCL-03 | データベース | Supabaseの自動スケーリング活用 |

### 4.6 アクセシビリティ

| ID | 要件 | 詳細 |
|----|------|------|
| A11Y-01 | セマンティックHTML | 適切なHTML要素の使用 |
| A11Y-02 | ARIAラベル | インタラクティブ要素へのラベル付け |
| A11Y-03 | キーボード操作 | キーボードのみでの操作対応 |
| A11Y-04 | 色コントラスト | WCAG 2.1 AA準拠 |

---

## 5. UI/UX要件

### 5.1 デザイン原則

1. **落ち着き**: パステル調の穏やかな配色
2. **シンプル**: ミニマルなアニメーション、シンプルなレイアウト
3. **テキスト優先**: 画像より文章を重視する表示
4. **プレッシャーフリー**: 正確な「いいね」数を隠す、ランキングなし

### 5.2 カラーパレット

| 用途 | 色 | カラーコード |
|------|-----|-------------|
| Primary | ソフトセージグリーン | #8FBC8F |
| Primary Light | | #C5E1C5 |
| Primary Dark | | #6B8E6B |
| Background Primary | ウォームホワイト | #FAF9F6 |
| Background Secondary | | #F5F5F0 |
| Text Primary | ダークグレー | #3D3D3D |
| Text Secondary | | #6B6B6B |
| Accent | ソフトコーラル | #E8A598 |

### 5.3 タイポグラフィ

- **フォント**: Noto Sans JP, Hiragino Sans, Yu Gothic
- **行間**: 1.8（日本語テキスト向け）
- **基本サイズ**: 16px (1rem)

### 5.4 レスポンシブ対応

| ブレークポイント | 幅 |
|-----------------|-----|
| Mobile | < 640px |
| Tablet | 640px - 1024px |
| Desktop | > 1024px |

---

## 6. 技術要件

### 6.1 フロントエンド

| 項目 | 技術 |
|------|------|
| フレームワーク | Next.js 14 (App Router) |
| 言語 | TypeScript (strict mode) |
| スタイリング | Tailwind CSS |
| UIコンポーネント | shadcn/ui |
| 状態管理 | Zustand or React Context |

### 6.2 バックエンド

| 項目 | 技術 |
|------|------|
| データベース | Supabase (PostgreSQL) |
| 認証 | Supabase Auth |
| ストレージ | Supabase Storage |
| リアルタイム | Supabase Realtime |

### 6.3 インフラ

| 項目 | 技術 |
|------|------|
| ホスティング | Vercel |
| PWA | next-pwa |
| CDN | Vercel Edge Network |

---

## 7. 制約事項

1. **予算**: 初期段階はSupabase/Vercelの無料枠を活用
2. **開発期間**: Phase 1 (MVP) を優先的に実装
3. **対応ブラウザ**: Chrome, Safari, Firefox, Edge の最新2バージョン
4. **対応デバイス**: スマートフォン、タブレット、デスクトップ

---

## 8. 将来の拡張

1. **モバイルアプリ**: React Native / Expo での iOS/Android アプリ
2. **プレミアム機能**: 広告なし、追加ストレージ、カスタムテーマ
3. **マッチング/婚活**: 希望者向けのオプション機能
4. **オフラインイベント**: イベントプラットフォームとの連携

---

## 9. 用語定義

| 用語 | 定義 |
|------|------|
| チー牛 | 内向的で静かな趣味を持つ人々を指すスラング |
| 検索避け | 外部検索エンジンにインデックスされないようにする施策 |
| 趣味タグ | ユーザーの興味・趣味を表すタグ |
| 共感リアクション | 「いいね」だけでなく「共感」「同感」「応援」など感情に寄り添うリアクション |
| 静かなタイムライン | トレンド排除、アルゴリズム排除のフォローベースタイムライン |

---

## 更新履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| 1.0 | 2026-01-16 | 初版作成 |
